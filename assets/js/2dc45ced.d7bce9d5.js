"use strict";(self.webpackChunkddb_docs=self.webpackChunkddb_docs||[]).push([[218],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=d(n),m=r,h=u["".concat(s,".").concat(m)]||u[m]||c[m]||o;return n?a.createElement(h,l(l({ref:t},p),{},{components:n})):a.createElement(h,l({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var d=2;d<o;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2400:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:4},l="Server",i={unversionedId:"server",id:"server",title:"Server",description:"image",source:"@site/docs/server.md",sourceDirName:".",slug:"/server",permalink:"/docs/server",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Registry",permalink:"/docs/registry"},next:{title:"CLI",permalink:"/docs/cli"}},s={},d=[{value:"Getting Started",id:"getting-started",level:2},{value:"Linux/macOS",id:"linuxmacos",level:3},{value:"Windows",id:"windows",level:3},{value:"Set Storage Path",id:"set-storage-path",level:2},{value:"Run in SingleDB mode",id:"run-in-singledb-mode",level:2},{value:"Under the Hood",id:"under-the-hood",level:2},{value:"Updating",id:"updating",level:2},{value:"Getting Help",id:"getting-help",level:2}],p={toc:d};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"server"},"Server"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1951843/168910096-ed819236-4945-4c0a-bf34-5d3223961697.png",alt:"image"})),(0,r.kt)("p",null,"A server to manage and share aerial data assets (aerial images, orthophotos, elevation models, point clouds, textured models, panoramas, etc.)."),(0,r.kt)("p",null,"You can run DroneDB Server to organize aerial data, share it with others or even build custom applications on top of its API."),(0,r.kt)("p",null,"You provide the files, DroneDB Server handles the rest: on-demand dynamic tiling, creating thumbnails, parsing geolocation data, streaming meshes, handling metadata, geoprojecting images and many other functions."),(0,r.kt)("p",null,"DroneDB Server organizes your data in a straightforward filesystem structure. There's no databases, unique identifiers or other complex layers. You can always access your data from the filesystem."),(0,r.kt)("p",null,"Backing up your DroneDB Server is as simple as copying the entire storage folder. You can even toss away DroneDB server and you will still be able to access your data in an organized manner."),(0,r.kt)("h2",{id:"getting-started"},"Getting Started"),(0,r.kt)("h3",{id:"linuxmacos"},"Linux/macOS"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"First install ",(0,r.kt)("a",{parentName:"li",href:"https://www.docker.com/"},"docker"),". It's the only requirement.")),(0,r.kt)("p",null,"Download ",(0,r.kt)("a",{parentName:"p",href:"https://raw.githubusercontent.com/DroneDB/Server/master/ddb-server.sh"},"ddb-server.sh")," and run from a command prompt:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"chmod +x ddb-server.sh\n./ddb-server.sh\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Open a browser to ",(0,r.kt)("a",{parentName:"li",href:"http://localhost:5000"},"http://localhost:5000")," and login with the default credentials: ",(0,r.kt)("inlineCode",{parentName:"li"},"admin:password"),"."),(0,r.kt)("li",{parentName:"ul"},"You can change the default password by visiting ",(0,r.kt)("a",{parentName:"li",href:"http://localhost:5000/account"},"http://localhost:5000/account"))),(0,r.kt)("h3",{id:"windows"},"Windows"),(0,r.kt)("p",null,"Coming soon!"),(0,r.kt)("h2",{id:"set-storage-path"},"Set Storage Path"),(0,r.kt)("p",null,"By default DroneDB Server will store all data in a ",(0,r.kt)("inlineCode",{parentName:"p"},"storage/")," folder. You can change that by passing a path:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"./ddb-server.sh /path/to/storage\n")),(0,r.kt)("p",null,"See ",(0,r.kt)("inlineCode",{parentName:"p"},"./ddb-server.sh --help")," for other options."),(0,r.kt)("h2",{id:"run-in-singledb-mode"},"Run in SingleDB mode"),(0,r.kt)("p",null,"DroneDB Server can operate in two modes: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Full"),": organizations and datasets will be saved in the storage path. This is the default."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Single"),": if storage path is a directory containing existing files, the directory will be indexed and published by the server. A single ",(0,r.kt)("inlineCode",{parentName:"li"},"projects")," organization will exist and a single dataset will be available. This can be useful to quickly share folders with others, or to manage your aerial data locally.")),(0,r.kt)("p",null,"For example, if you have a folder with results from ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/OpenDroneMap/ODM"},"ODM"),", you can run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"./ddb-server.sh /data/drone/sunset-park\n")),(0,r.kt)("p",null,"DroneDB Server will automatically index/sync the specified folder and serve it on http://localhost:5000/r/projects/sunset-park"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1951843/169094873-923dc83e-ca3e-4584-8ee4-7d318099474f.png",alt:"image"})),(0,r.kt)("h2",{id:"under-the-hood"},"Under the Hood"),(0,r.kt)("p",null,"We mentioned earlier that DroneDB Server organizes your data in a straightforward filesystem structure. What happens when we launch the server on an existing folder, or create a new dataset?"),(0,r.kt)("p",null,"A DroneDB dataset is simply a folder, plus a ",(0,r.kt)("inlineCode",{parentName:"p"},".ddb")," subfolder. The ",(0,r.kt)("inlineCode",{parentName:"p"},".ddb")," subfolder is created for you by DroneDB Server if it doesn't exist already. You can download the ",(0,r.kt)("a",{parentName:"p",href:"./cli"},"ddb")," command line client to manually manage DroneDB datasets. In fact, DroneDB Server is simply a RESTful API that exposes the functions of the command line client (plus a nice ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/DroneDB/Hub"},"GUI"),")."),(0,r.kt)("p",null,"Taking as an example our ",(0,r.kt)("inlineCode",{parentName:"p"},"/data/drone/sunset-park")," folder, we can make changes or queries to our dataset directly from the command line:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'cd sunset-park\nddb info . --format json\n--\x3e [{"depth":2,"mtime":1652890808,"path":"file:///data/drone/sunset-park/.","properties":{"entries":494,"public":false},"size":957197402,"type":7}]\n')),(0,r.kt)("p",null,"If we want to remove a directory from the index, for example, we can run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ddb rm opensfm\nD   opensfm\nD   opensfm/reconstruction.json\nD   opensfm/tracks.csv\nD   opensfm/profile.log\n...\n")),(0,r.kt)("p",null,"Note the folder has been removed from the index only (it still exists in the filesystem). This is on purpose."),(0,r.kt)("p",null,'The GUI in DroneDB Server knows to look for a "name" ',(0,r.kt)("a",{parentName:"p",href:"https://docs.dronedb.app/commands/meta.html"},"metadata field")," when assigning a friendly name to a dataset. Let's set one:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'ddb meta set name "A cool name"\nData: A cool name\nId: ca1e0909-0cbe-4f31-b484-8ce331e7bfc4\nMtime: 1652892452\n')),(0,r.kt)("p",null,"Refreshing the GUI now shows:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1951843/169097993-10b8b877-f6f6-4dca-891c-a3ae630588d8.png",alt:"image"})),(0,r.kt)("p",null,"During the process of indexing the files, DroneDB Server has taken care of generating special ",(0,r.kt)("inlineCode",{parentName:"p"},"build")," files whenever appropriate:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ls .ddb/build\n3b670cd7053359fdd2b8765c6fbee5ff513d0becec4a237ef152df5c05c54bd0\n7f7316050748ce97c2c2b85ce2bccce247e4e6b9f86d559e75264d1a63421137\nb13d44e180f010cc33154afbe837f0bed3985be76555efd0fc149a091709c9a0\n...\n")),(0,r.kt)("p",null,"Each folder is named after the SHA256 of the file that was built."),(0,r.kt)("p",null,"For example, the point cloud ",(0,r.kt)("inlineCode",{parentName:"p"},"odm_georeferenced_model.laz")," file has a SHA256 of ",(0,r.kt)("inlineCode",{parentName:"p"},"b13d44e180f010cc33154afbe837f0bed3985be76555efd0fc149a091709c9a0")," and an ",(0,r.kt)("a",{parentName:"p",href:"https://entwine.io/"},"EPT")," tileset has automatically been generated:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ls .ddb/build/b13d44e180f010cc33154afbe837f0bed3985be76555efd0fc149a091709c9a0\nept\n")),(0,r.kt)("p",null,"This allows efficient streaming of point clouds over the GUI (and other programs such as QGIS):"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1951843/169099089-6c4cae34-a22a-44c9-9e24-77be8f2a2967.png",alt:"image"})),(0,r.kt)("p",null,"DroneDB Server can build Cloud Optimized GeoTIFFs (for orthophotos, elevation models), EPT (for point clouds), ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/cnr-isti-vclab/nexus"},"Nexus")," (for streaming meshes). It does the heavy-lifting, so you don't have to."),(0,r.kt)("p",null,"See other ",(0,r.kt)("a",{parentName:"p",href:"./cli#commands-reference"},"commands"),"."),(0,r.kt)("p",null,"What if you want to remove any trace of DroneDB from your data? Simply delete all ",(0,r.kt)("inlineCode",{parentName:"p"},".ddb")," folders. That's it! DroneDB never mutates the input data and keeps the same filesystem structure you choose."),(0,r.kt)("h2",{id:"updating"},"Updating"),(0,r.kt)("p",null,"To update the software run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"./ddb-server.sh update\n")),(0,r.kt)("h2",{id:"getting-help"},"Getting Help"),(0,r.kt)("p",null,"Commercial support is available. ",(0,r.kt)("a",{parentName:"p",href:"https://dronedb.app/contact"},"Get in touch"),"."))}c.isMDXComponent=!0}}]);